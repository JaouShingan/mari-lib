"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),y=require("element-plus"),h={key:0,style:{width:"100%"}},f={__name:"index",props:e.mergeModels({columns:{type:Array,default:()=>[]},spans:{type:Number,default:4},span:{type:Number,default:1},colgap:{type:Number,default:0},rowgap:{type:Number,default:20},labelWidth:{type:String,default:"80px"},lastDiv:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{expose:c}){const o=l;c({validate(){return s.value.validate(...arguments)},validateField(){return s.value.validateField(...arguments)},resetFields(){return s.value.resetFields(...arguments)},scrollToField(){return s.value.scrollToField(...arguments)},clearValidate(){return s.value.clearValidate(...arguments)}});const a=e.useModel(l,"modelValue"),s=e.ref(),m=e.computed(()=>({"column-gap":`${o.colgap}px`,"row-gap":`${o.rowgap}px`})),d=e.computed(()=>`calc((100% - ${(o.spans-1)*o.colgap}px) / ${o.spans})`),i=e.ref({});e.watch(a,()=>{i.value=o.columns.reduce((n,{key:r,hide:t})=>(t instanceof Function?n[r]=t(a):t instanceof Boolean?n[r]=t:n[r]=!0,n),{})},{immediate:!0,deep:!0});const p=e.computed(()=>o.columns.map(({span:n,...r})=>{const t={width:`calc(${d.value} * ${n||o.span||1})`};return{...r,itemStyle:t}}));return(n,r)=>(e.openBlock(),e.createBlock(e.unref(y.ElForm),{class:"mari-form",ref_key:"formRef",ref:s,model:a.value,inline:"","label-width":l.labelWidth,style:e.normalizeStyle(m.value)},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"prepend"),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:t.key},[i.value[t.key]?(e.openBlock(),e.createBlock(e.unref(y.ElFormItem),e.mergeProps({key:t.key,label:t.name,prop:t.key,style:t.itemStyle},t.itemAttrs),{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.component),e.mergeProps({modelValue:a.value[t.key],"onUpdate:modelValue":u=>a.value[t.key]=u},t.attrs),null,16,["modelValue","onUpdate:modelValue"]))]),_:2},1040,["label","prop","style"])):e.createCommentVNode("",!0)],64))),128)),e.renderSlot(n.$slots,"append"),l.lastDiv?(e.openBlock(),e.createElementBlock("div",h)):e.createCommentVNode("",!0)]),_:3},8,["model","label-width","style"]))}},w={class:"mari-search"},g={__name:"index",props:e.mergeModels({columns:{type:Array,default(){return[]}},spans:{type:Number,default:4},colgap:{type:Number,default:20},rowgap:{type:Number,default:10},searchBtnPosition:{type:String,default:"row",validator(l){return["follow","follow-right","row"].includes(l)}},defaultFold:Boolean},{modelValue:{},modelModifiers:{}}),emits:e.mergeModels(["search","reset"],["update:modelValue"]),setup(l,{emit:c}){const o=Object.freeze({follow:"follow",followRight:"follow-right",row:"row"}),a=l,s=c,m=e.ref(),d=e.useModel(l,"modelValue"),i=e.ref(a.defaultFold||!1),p=e.computed(()=>{let r=0;const t=[];if(a.searchBtnPosition===o.row?r=a.spans:r=a.spans-1,i.value)for(const u of a.columns){if(r===0)break;if(!u.span)r-->=0&&t.push(u);else if((r-=u.span)>=0)t.push(u);else break}else t.push(...a.columns);return t}),n=function(){m.value.resetFields(),d.value={},s("reset",d.value)};return(r,t)=>{const u=e.resolveComponent("el-button");return e.openBlock(),e.createElementBlock("div",w,[e.createVNode(e.unref(f),{ref_key:"formRef",ref:m,modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=v=>d.value=v),columns:p.value,rowgap:l.rowgap,colgap:l.colgap,"last-div":!1},{append:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["mari-search-btns",`mari-search-btns__${l.searchBtnPosition}`])},[e.createVNode(u,{type:"primary",onClick:t[0]||(t[0]=v=>s("search",d.value))},{default:e.withCtx(()=>[e.createTextVNode("搜索")]),_:1}),e.createVNode(u,{onClick:n},{default:e.withCtx(()=>[e.createTextVNode("重置")]),_:1}),e.createVNode(u,{onClick:t[1]||(t[1]=()=>i.value=!i.value)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i.value?"展开":"收起"),1)]),_:1})],2)]),_:1},8,["modelValue","columns","rowgap","colgap"])])}}},V=(l,c)=>{const o=l.__vccOpts||l;for(const[a,s]of c)o[a]=s;return o},b={};function B(l,c){const o=e.resolveComponent("el-select");return e.openBlock(),e.createBlock(o,{class:"mari-select"})}const k=V(b,[["render",B]]),_={install(l,c){l.component("MForm",f),l.component("MSearch",g),l.component("MSelect",k)}};exports.Form=f;exports.Search=g;exports.Select=k;exports.default=_;
